<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Everpeak PH</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="homepagestyle.css">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-black py-3 fixed-top">
  <div class="container">
    <a class="navbar-brand fw-bold text-white" href="#">Everpeak Nature Camp</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navMenu">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a href="#" class="nav-link text-white">Home</a></li>
        <li class="nav-item"><a href="Prices.html" class="nav-link text-white">Prices</a></li>
        <li class="nav-item"><a href="#" class="nav-link text-white">Services</a></li>
        <li class="nav-item"><a href="booknow.html" class="nav-link text-white">Booknow!</a></li>
        <li class="nav-item">
          <a href="admin-login.html" class="nav-link text-white fw-bold">Admin!</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<header>
  <div id="Carousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner" id="carouselContainer">
    </div>
    <div class="carousel-caption d-none d-md-block static-caption">
      <h1 class="display-5 fw-bold" id="mainTitle">Welcome to Everpeak</h1>
      <p class="lead" id="mainTagline">Your one step to tranquility üå¥</p>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#Carousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#Carousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>
</header>

<main style="padding-top: 3rem; padding-bottom: 3rem;">
  <section class="container my-4 main-gallery">
    <div class="row g-3 align-items-stretch" id="galleryContainer">
    </div>
  </section>

  <div class="modal fade" id="galleryModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-fullscreen-md-down modal-xl">
      <div class="modal-content bg-black">
        <div class="modal-body p-0 position-relative">
          <div id="galleryCarousel" class="carousel slide" data-bs-ride="false">
            <div class="carousel-inner" id="modalGalleryContainer">
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#galleryCarousel" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#galleryCarousel" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
            </button>

            <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <section class="container mb-5">
    <div class="row">
      <div class="col-lg-12">
        <h2 class="fw-bold" id="contentTitle">Everpeak</h2>
        <p class="text-success fw-semibold" id="contentPrice">Starts at ‚Ç±8,400.00/night</p>
        <p id="contentTagline">Your one step to tranquility üå¥</p>
        <p><i class="bi bi-geo-alt-fill"></i> <span id="contentLocation">Purok 6, Pintong Bocaue, San Mateo Rizal, San Mateo, Philippines</span></p>

        <hr>

        <h5 class="fw-bold mt-4 collapse-title" data-bs-toggle="collapse" data-bs-target="#amenitiesCollapse" aria-expanded="false" aria-controls="amenitiesCollapse">
          Amenities <i class="bi bi-chevron-down ms-2"></i>
        </h5>
        <div class="collapse" id="amenitiesCollapse">
          <div class="row mt-3">
            <div class="col-md-6">
              <ul class="list-unstyled" id="amenitiesLeft">
              </ul>
            </div>
            <div class="col-md-6">
              <ul class="list-unstyled" id="amenitiesRight">
              </ul>
            </div>
          </div>
        </div>
     
        <hr class="mt-4">

        <h5 class="fw-bold mt-4 collapse-title" data-bs-toggle="collapse" data-bs-target="#accessCollapse" aria-expanded="false" aria-controls="accessCollapse">
          Accessibilities <i class="bi bi-chevron-down ms-2"></i>
        </h5>
        <div class="collapse" id="accessCollapse">
          <div class="row mt-3">
            <div class="col-md-6">
              <ul class="list-unstyled" id="accessLeft">
              </ul>
            </div>
            <div class="col-md-6">
              <ul class="list-unstyled" id="accessRight">
              </ul>
            </div>
          </div>
        </div>

        <hr class="mt-4">

        <h5 class="fw-bold mt-4">Transportation</h5>
        <div class="d-flex gap-2 mb-4" id="transportationContainer">
        </div>
      </div>
    </div>
  </section>
</main>

<footer class="new-footer text-white bg-black pt-5 pb-3">
  <div class="container">
    <div class="row mb-4">
      <div class="col-md-4 mb-4 mb-md-0">
        <h5 class="fw-bold text-uppercase" id="footerTitle">Everpeak<br>Philippines</h5>
        <p class="text-white-50 mt-3" id="footerDescription">
          Connects campers to campgrounds and stores, making every camping adventure seamless and memorable.
        </p>
        <div class="social-icons d-flex gap-2 mt-4">
          <a href="#" class="social-circle" target="_blank" id="facebookLink">
            <i class="bi bi-facebook"></i>
          </a>
        </div>
      </div>
    </div>
    <hr class="border-secondary mb-3">
    <div class="row align-items-center">
      <div class="col-md-6 mb-2 mb-md-0 d-flex align-items-center">
        <span class="fw-bold fs-5 me-4">Everpeak PH</span>
        <span class="small text-white-50" id="copyrightText">¬© 2025 Everpeak P.H. All Rights Reserved.</span>
      </div>
      <div class="col-md-6 text-md-end d-flex justify-content-center justify-content-md-end gap-3 small">
        <a href="#" class="text-white-50 text-decoration-none">Privacy Policy</a>
        <a href="#" class="text-white-50 text-decoration-none">Terms and Conditions</a>
      </div>
    </div>
  </div>
</footer>

<div class="promo-popup" id="promoPopup">
  <div class="popup-box" id="popupBox">
    <button class="close-btn" onclick="closePopup()">‚úñ</button>
    <h2>üåßÔ∏è Rainy Season Promo!</h2>
    <p>WE ARE IN RAINY SEASON PROMO!!!<br>BOOK NOW FOR AN EVEN GREATER EXPERIENCE üå¥</p>
  </div>
</div>

<!-- Firebase Scripts -->
<!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script>
// Firebase configuration for Everpeak Nature Camp
const firebaseConfig = {
    apiKey: "AIzaSyAvvhMpf_WitusAfR-sqI8pMLIAPqygOOY",
    authDomain: "everpeak-df533.firebaseapp.com",
    projectId: "everpeak-df533",
    storageBucket: "everpeak-df533.firebasestorage.app",
    messagingSenderId: "314009845647",
    appId: "1:314009845647:web:60381fba9cbecb51c395fa",
    measurementId: "G-0XEXF5JSZ8"
};

// Initialize Firebase
const app = firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// Export Firebase services
window.firebase = firebase;
window.auth = auth;
window.db = db;

console.log("Firebase initialized successfully");
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
// Enhanced data loading with Firebase
async function loadWebsiteData() {
    try {
        // Try Firebase first
        const doc = await db.collection('websiteData').doc('everpeakContent').get();
        if (doc.exists) {
            const firebaseData = doc.data();
            localStorage.setItem('everpeakWebsiteData', JSON.stringify(firebaseData));
            return firebaseData;
        }
    } catch (error) {
        console.log('Firebase load failed, using localStorage:', error);
    }
    
    // Fallback to localStorage
    const storedData = localStorage.getItem('everpeakWebsiteData');
    return storedData ? JSON.parse(storedData) : null;
}

async function renderCarousel() {
    const websiteData = await loadWebsiteData();
    const carouselContainer = document.getElementById('carouselContainer');
    
    if (!websiteData || !websiteData.carousel || websiteData.carousel.length === 0) {
        carouselContainer.innerHTML = `
            <div class="carousel-item active">
                <img src="/WEBSYS/FinalProj/Carousel/Carousel3.jpg" alt="Everpeak Pool" class="d-block w-100">
            </div>
            <div class="carousel-item">
                <img src="/WEBSYS/FinalProj/Carousel/Carousel5.jpg" alt="Everpeak Interior Room" class="d-block w-100">
            </div>
        `;
        return;
    }

    carouselContainer.innerHTML = '';
    websiteData.carousel.forEach((image, index) => {
        const carouselItem = document.createElement('div');
        carouselItem.className = index === 0 ? 'carousel-item active' : 'carousel-item';
        carouselItem.innerHTML = `
            <img src="${image.url}" alt="${image.alt}" class="d-block w-100">
        `;
        carouselContainer.appendChild(carouselItem);
    });
}

async function renderGallery() {
    const websiteData = await loadWebsiteData();
    const galleryContainer = document.getElementById('galleryContainer');
    const modalGalleryContainer = document.getElementById('modalGalleryContainer');
    
    if (!websiteData || !websiteData.gallery || websiteData.gallery.length === 0) {
        galleryContainer.innerHTML = `
            <div class="col-lg-8">
                <div class="img-holder">
                    <img src="/WEBSYS/FinalProj/Carousel/Carousel5.jpg" class="gallery-img rounded-4" alt="Main Camp Image" data-index="0">
                </div>
            </div>
            <div class="col-lg-4 d-flex flex-column gap-3">
                <div class="img-holder flex-fill">
                    <img src="/WEBSYS/FinalProj/Carousel/Carousel3.jpg" class="gallery-img rounded-4" alt="Right Top" data-index="1">
                </div>
                <div class="img-holder flex-fill position-relative show-more-wrapper" data-bs-toggle="modal" data-bs-target="#galleryModal">
                    <img src="/WEBSYS/FinalProj/Carousel/Carousel.jpg" class="gallery-img rounded-4" alt="Show More" data-index="2">
                    <div class="show-more-overlay">+ Show More</div>
                </div>
            </div>
        `;
        
        modalGalleryContainer.innerHTML = `
            <div class="carousel-item active">
                <img src="/WEBSYS/FinalProj/Carousel/Carousel.jpg" class="d-block w-100 modal-img" alt="Main Camp Image">
            </div>
            <div class="carousel-item">
                <img src="/WEBSYS/FinalProj/Carousel/Carousel3.jpg" class="d-block w-100 modal-img" alt="Right Top">
            </div>
            <div class="carousel-item">
                <img src="/WEBSYS/FinalProj/Carousel/Pool.jpg" class="d-block w-100 modal-img" alt="Right Bottom">
            </div>
            <div class="carousel-item">
                <img src="/WEBSYS/FinalProj/Carousel/Carousel5.jpg" class="d-block w-100 modal-img" alt="Extra 1">
            </div>
            <div class="carousel-item">
                <img src="/WEBSYS/FinalProj/Carousel/Carousel4.jpg" class="d-block w-100 modal-img" alt="Extra 2">
            </div>
        `;
        return;
    }

    galleryContainer.innerHTML = '';
    const mainImages = websiteData.gallery.slice(0, 3);
    
    mainImages.forEach((image, index) => {
        if (index === 0) {
            const mainCol = document.createElement('div');
            mainCol.className = 'col-lg-8';
            mainCol.innerHTML = `
                <div class="img-holder">
                    <img src="${image.url}" class="gallery-img rounded-4" alt="${image.alt}" data-index="${index}">
                </div>
            `;
            galleryContainer.appendChild(mainCol);
        } else {
            const sideCol = galleryContainer.querySelector('.col-lg-4') || document.createElement('div');
            if (!sideCol.classList.contains('col-lg-4')) {
                sideCol.className = 'col-lg-4 d-flex flex-column gap-3';
                galleryContainer.appendChild(sideCol);
            }
            
            const imgHolder = document.createElement('div');
            imgHolder.className = index === 2 ? 'img-holder flex-fill position-relative show-more-wrapper' : 'img-holder flex-fill';
            imgHolder.setAttribute('data-bs-toggle', 'modal');
            imgHolder.setAttribute('data-bs-target', '#galleryModal');
            imgHolder.innerHTML = `
                <img src="${image.url}" class="gallery-img rounded-4" alt="${image.alt}" data-index="${index}">
                ${index === 2 ? '<div class="show-more-overlay">+ Show More</div>' : ''}
            `;
            sideCol.appendChild(imgHolder);
        }
    });

    modalGalleryContainer.innerHTML = '';
    websiteData.gallery.forEach((image, index) => {
        const modalItem = document.createElement('div');
        modalItem.className = index === 0 ? 'carousel-item active' : 'carousel-item';
        modalItem.innerHTML = `
            <img src="${image.url}" class="d-block w-100 modal-img" alt="${image.alt}">
        `;
        modalGalleryContainer.appendChild(modalItem);
    });
}

async function renderContent() {
    const websiteData = await loadWebsiteData();
    if (!websiteData || !websiteData.content) return;

    const content = websiteData.content;
    if (content.title) document.getElementById('contentTitle').textContent = content.title;
    if (content.price) document.getElementById('contentPrice').textContent = content.price;
    if (content.tagline) document.getElementById('contentTagline').textContent = content.tagline;
    if (content.location) document.getElementById('contentLocation').textContent = content.location;
    if (content.title) document.getElementById('mainTitle').textContent = content.title;
    if (content.tagline) document.getElementById('mainTagline').textContent = content.tagline;
    
    if (content.amenitiesLeft) {
        const amenitiesLeft = document.getElementById('amenitiesLeft');
        amenitiesLeft.innerHTML = content.amenitiesLeft.split('\n').map(item => 
            `<li><i class="bi bi-check-circle"></i> ${item}</li>`
        ).join('');
    }
    
    if (content.amenitiesRight) {
        const amenitiesRight = document.getElementById('amenitiesRight');
        amenitiesRight.innerHTML = content.amenitiesRight.split('\n').map(item => 
            `<li><i class="bi bi-check-circle"></i> ${item}</li>`
        ).join('');
    }
    
    if (content.accessLeft) {
        const accessLeft = document.getElementById('accessLeft');
        accessLeft.innerHTML = content.accessLeft.split('\n').map(item => 
            `<li><i class="bi bi-check-circle"></i> ${item}</li>`
        ).join('');
    }
    
    if (content.accessRight) {
        const accessRight = document.getElementById('accessRight');
        accessRight.innerHTML = content.accessRight.split('\n').map(item => 
            `<li><i class="bi bi-check-circle"></i> ${item}</li>`
        ).join('');
    }
    
    if (content.transportation) {
        const transportContainer = document.getElementById('transportationContainer');
        transportContainer.innerHTML = content.transportation.split(',').map(item => 
            `<span class="badge bg-light text-dark border">${item.trim()}</span>`
        ).join('');
    }
}

async function renderFooter() {
    const websiteData = await loadWebsiteData();
    if (!websiteData || !websiteData.footer) return;

    const footer = websiteData.footer;
    
    if (footer.title) document.getElementById('footerTitle').textContent = footer.title;
    if (footer.description) document.getElementById('footerDescription').textContent = footer.description;
    if (footer.copyright) document.getElementById('copyrightText').textContent = footer.copyright;
    
    if (footer.facebookUrl) {
        const facebookLink = document.getElementById('facebookLink');
        facebookLink.href = footer.facebookUrl;
    }
}

document.addEventListener('DOMContentLoaded', async function() {
    await renderCarousel();
    await renderGallery();
    await renderContent();
    await renderFooter();
    
    setTimeout(() => {
        document.querySelectorAll('.gallery-img').forEach(function(img) {
            img.addEventListener('click', function() {
                const index = this.getAttribute('data-index');
                const modal = new bootstrap.Modal(document.getElementById('galleryModal'));
                const carousel = new bootstrap.Carousel(document.getElementById('galleryCarousel'));
                carousel.to(parseInt(index));
                modal.show();
            });
        });
    }, 100);
});

window.addEventListener('load', function() {
    setTimeout(function() {
        document.getElementById('promoPopup').classList.add('show');
    }, 1000);
});

function closePopup() {
    document.getElementById('promoPopup').classList.remove('show');
}

document.getElementById('promoPopup').addEventListener('click', function(e) {
    if (e.target === this) {
        closePopup();
    }
});
</script>

</body>
</html>
